## Docker Compose

* When we run docker, have a dependency. So, we cannot run the when it increases the length of the command
* Whenever commands length increases or increasing no.of commands or increasing manual dependecies, then we have to keep all those in a file and we will run that file
* For this purpose, in docker we will use docker compose

> Docker compose is a tool which is of YAML format for defining and running multi-container applications

* Docker compose is the key to unlocking a streamlined and efficient development and deployment experinces
* If you have more containers and if you want multiple containers at a time running docker commands in the terminal is not a good approach
* So, we can define all our services in docker compose file and we can manage them properly
* Using docker compose, we can start, stop, and rebuild services easily 

### Creating Docker Compose file for our Expense Project**

* First we need to create docker compose file with an extension of `.yaml`
* Basically we need to start the project step-by-step
   * First we need to create docker network and volume
   * Then we need to create mysql, backend and frontend respectively

**CODE**
```
version: "3"
networks:
  expense:
volumes:
  mysql:  # docker volume create mysql
services:
  mysql:
    image: joindevops/mysql:v1
    container_name: mysql 
    volumes:
    - mysql:/var/lib/mysql # -v mysql:/var/lib/mysql
  backend:
    image: joindevops/backend:v1
    container_name: backend
    #command: sh -c "sleep 5 && node /opt/server/index.js"
    depends_on:
    - mysql
  frontend:
    image: joindevops/frontend:v1
    container_name: frontend
    ports:
    - 80:80
    depends_on:
    - backend
```

**Explanation of CODE**
* the `version` field specifies the version of the docker compose file format being used
* the `networks` field defines custom docker network
     * Here 'networks' is equivalent to the command `docker network create networkname`
* the `volumes` filed is used to persist data generated by and used by Docker containers 
     * Here `volumes` is equivalent to the command `docker volume create volumename`
* the `services` field refer to the different components or containers that make up your application. 
     * Each service corresponds to a specific container and is equivalent to the command `docker run` 
     * `image` should be pulled from docker hub. For this, we need to push our images to our docker hub using tagging and from there we will pull those images
     * `container_name` is equivalent to `--name mysql`
     * `depends_on` specifies the dependency in which *backend is depending on mysql* and *frontend is depending on backend*
     * `volumes` 
         * Here, `mysql` service uses a named volume mysql which is mounted to `/var/lib/mysql` inside the container to store MYSQL data persistently
     * `ports` 
         * Here, `frontend` service exposes port 80 (HTTP) to the host (Maps host port 80 to container port 80)
